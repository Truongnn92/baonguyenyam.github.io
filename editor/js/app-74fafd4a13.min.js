/*
 ////////////////////////////////////////////////////////
 // Bao Nguyen Apps
 // @version v1.0
 // @link https://baonguyenyam.github.io
 // @license MIT
 // @Coding by Bao Nguyen - 0969689893 - 0933112900
 // @baonguyenyam@gmail.com
 ////////////////////////////////////////////////////////
*/"use strict";function save(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"}),n=document.getElementById("getval").value;if("text/html"===n)s="index.html";else if("sass"===n)s="main.sass";else if("scss"===n)s="main.scss";else if("css"===n)s="main.css";else if("javascript"===n)s="main.js";else if("pug"===n)s="index.pug";else if("markdown"===n)s="index.md";else var s="text.txt";saveAs(t,s)}function saveC(e){if("text/html"===e||"pug"===e||"markdown"===e)t=document.getElementById("preview").contentWindow.document.body.innerHTML;else{var t=$("#getval2").val();console.log(t)}var n=new Blob([t],{type:"text/plain;charset=utf-8"}),s=document.getElementById("getval").value;if("text/html"===s)a="index.html";else if("sass"===s)a="main.css";else if("scss"===s)a="main.css";else if("css"===s)a="main.css";else if("javascript"===s)a="main.js";else if("pug"===s)a="index.html";else if("markdown"===s)a="index.html";else var a="text.txt";saveAs(n,a)}function changeEventHandler(e){var t=e.value.split(";");document.getElementById("getval").value=t[1];var n=new XMLHttpRequest;n.open("GET","./example/"+t[0]+".txt",!1),n.onreadystatechange=function(){if(4===n.readyState&&(200===n.status||0==n.status)){var e=n.responseText,s=t[1];"scss"===s&&(s="sass"),updateEditor(e,s),setTimeout(updatePreview(s),300)}},n.send(null)}function getf(e,t){var n=new XMLHttpRequest;n.open("GET","./labs/"+e+".txt",!1),n.onreadystatechange=function(){if(4===n.readyState&&(200===n.status||0==n.status)){var e=n.responseText,s=t;"scss"===s&&(s="sass"),updateEditor(e,s),setTimeout(updatePreview(s),300)}},n.send(null)}function changeEventHandler2(e){var t=e.split(";");if(t[3]){if($("#youpath").val().length<=0){$("#youpath").val().split(";");document.getElementById("getval").value=t[3],getf(t[2],t[3])}setTimeout(function(){document.getElementById("getval").value=t[1],getf(t[0],t[1])},1)}else document.getElementById("getval").value=t[1],getf(t[0],t[1])}function updateEditor(e,t){document.getElementById("code").value=e,editor.setValue(e),editor.setOption("mode",t)}function updatePreview(e){var t=editor.getValue(),n=document.getElementById("preview");if("text/html"===e||"pug"===e||"markdown"===e)$("#preview2").hide(),$("#preview").show(),(s=n.contentDocument||n.contentWindow.document).open();else{var s=document.getElementById("preview2");$("#preview").hide(),$("#preview2").show(),s.innerHTML=null}if("text/html"===e){for(var a,i=[],o=/<link [^>]*href="([^"]*)"[^>]*>/gm;a=o.exec(t);)i.push(a[1]);var l=t.replace(/<link\b[^>]*>/i,"");s.write(l),i.length>0&&setTimeout(function(){$("#preview").contents().find("head").append('<style type="text/css">'+$("#youcode").val()+"</style>")},1)}else if("sass"===e||"scss"===e)t&&new Sass("./editor/sass/sass.worker.js").compile(t,{indentedSyntax:!1,style:Sass.style.expanded,indent:"  ",linefeed:"\n"},function(e){$("#getval2").val(e.text),CodeMirror(s,{value:e.text,tabMode:"indent",mode:"css",lineNumbers:!0,tabSize:4,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,showCursorWhenSelecting:!0,wordWrap:!0})});else if("css"===e)$("#getval2").val(t),$("#youpath").val().length,$("#youcode").val(t),CodeMirror(s,{value:t,tabMode:"indent",mode:"css",lineNumbers:!0,tabSize:4,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,showCursorWhenSelecting:!0,wordWrap:!0});else if("javascript"===e)$("#getval2").val(t),CodeMirror(s,{value:t,tabMode:"indent",mode:"javascript",lineNumbers:!0,tabSize:4,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,showCursorWhenSelecting:!0,wordWrap:!0});else if("markdown"===e){var r=t,d=(new showdown.Converter).makeHtml(r);s.write(d)}else"pug"===e?(t=d=require("pug").compile(t)(),s.write(d)):($("#getval2").val(t),CodeMirror(s,{value:t,tabMode:"indent",mode:"text",lineNumbers:!0,tabSize:4,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,showCursorWhenSelecting:!0,wordWrap:!0}));if(t.indexOf("<title>")>0)u=t.match(/<title>(.*?)<\/title>/g).map(function(e){return e.replace(/<\/?title>/g,"")});else if(e)u="Compile";else var u="Text";document.getElementById("bar").innerHTML=u,"text/html"!==e&&"pug"!==e&&"markdown"!==e||s.close()}function getDataDemo(e,t){if(e.indexOf(";text/html")>0)changeEventHandler2(e);else if(e.indexOf("http")>-1||e.indexOf(".zip")>-1)window.open(e,"_blank");else if(e.indexOf(".svg")>-1)(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="blob",n.onload=function(e){download(n.response,t,"image/svg")},n.send();else if(e.indexOf(".png")>-1)(n=new XMLHttpRequest).open("GET",e,!0),n.responseType="blob",n.onload=function(e){download(n.response,t,"image/png")},n.send();else if(e.indexOf(".jpg")>-1){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){download(n.response,t,"image/jpg")},n.send()}else e.indexOf(";css")>-1&&($("#youpath").val(e),changeEventHandler2(e))}function toggleMenu(){$(".menuto").toggleClass("active")}var DOMAIN_URL="http://domain.com",delay,map=CodeMirror.keyMap.sublime,editor=CodeMirror.fromTextArea(document.getElementById("code"),{tabMode:"indent",keyMap:"sublime",lineNumbers:!0,theme:"monokai",tabSize:4,indentWithTabs:!0,matchBrackets:!0,autoCloseBrackets:!0,lineWrapping:!0,showCursorWhenSelecting:!0,scrollbarStyle:"simple",styleActiveLine:!0,foldGutter:!0,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"],onChange:function(){clearTimeout(delay),delay=setTimeout(updatePreview(null),300)},onCursorActivity:function(){editor.matchHighlight("CodeMirror-matchhighlight")},wordWrap:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())},"Ctrl-Space":"autocomplete",F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}});setTimeout(updatePreview(null),300);