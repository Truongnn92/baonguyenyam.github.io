
/*//////////////////////////////////////////////////////////////////////*/
/*//ANIMATED////////////////////////////////////////////////////////////*/
/*//////////////////////////////////////////////////////////////////////*/

/*ANIMATED IN-OUT
==========================================*/
$(function() {
	$('[data-animated-box=click]').click(function(){
		$(this).find("[data-animated-in]").each(function() {
			var animOut = $(this).attr('data-animated-out');
			$(this).removeClass('animated '+ animOut);
			var animIn = $(this).attr('data-animated-in');
			$(this).addClass('animated '+ animIn);
		});
	});
	$('[data-animated-box=hover]').hover(function(){
		$(this).find("[data-animated-in]").each(function() {
			var animOut = $(this).attr('data-animated-out');
			$(this).removeClass('animated '+ animOut);
			var animIn = $(this).attr('data-animated-in');
			$(this).addClass('animated '+ animIn);
		});
	});
	$('[data-animated-box]').mouseleave(function(){
		$(this).find("[data-animated-out]").each(function() {
			var animIn = $(this).attr('data-animated-in');
			$(this).removeClass('animated '+ animIn);
			var animOut = $(this).attr('data-animated-out');
			$(this).addClass('animated '+ animOut);
		});
	});

	

});

(function ($) {$.extend($.fn, {
	
	FVN_FW_DataFade: function (x) {

			$(window).scroll( function(){
				$('[data-fade]').each( function(i){
					var me = this;
					var bottom_of_object = $(this).offset().top + $(this).outerHeight();  //options 1
					var top_of_object = $(this).offset().top; //options 2
					var bottom_of_window = $(window).scrollTop() + $(window).height();
					// FADE FOREVER
					//var animfade = $(this).attr('data-fade');
					//$(this).removeClass(animfade);
					if( bottom_of_window > top_of_object ){
					  var animfade = $(this).attr('data-fade');
					  $(this).addClass('animated '+ animfade);
						//setInterval(function(){
						//$(me).addClass('opacity10');
						//}, 2000);
					}

				}); 
			 });
	},

	FVN_FW_DataReplay: function (x) {

		return this.each(function () {
			var me = this;
			var animtype = $(this).attr('data-replay');
			var anim = $(this).attr('data-animated-auto');

			if(!animtype || animtype=="" || isNaN(animtype)){		
				
			} else if(animtype<0){
				$(this).addClass('runloop');
		    }
			else {
				
			setInterval(function(){
				$(me).removeClass('animated '+ anim);
			}, (animtype-100));
			 
			setInterval(function(){
				$(me).addClass('animated '+ anim);
			}, animtype);

				
			}

		})
	}, 


	FVN_FW_DataAnimated: function (x) {
	
	return this.each(function () {
		
		var animtype = $(this).attr('data-type');
		var anim = $(this).attr('data-animated');
		
		if(!animtype || animtype=="hover"){
			$(this).hover(function(){
				$(this).addClass('animated '+ anim);
			});
			$(this).mouseleave(function(){
				$(this).removeClass('animated '+ anim);
			});
		}
		else if(animtype=="click"){
			
			$(this).click(function() {
		        $(this).removeClass('animated '+ anim).delay(10).queue(function(next){
		            $(this).addClass('animated '+ anim);
		            next();
		        });
		        return false;
		    });		

		}
		else if(animtype=="focus"){
			$(this).focus(function(){
				$(this).addClass('animated '+ anim);
			});
			$(this).focusout(function(){
				$(this).removeClass('animated '+ anim);
			});
		}
	

	})	

	},

	FVN_FW_DataAnimatedAuto: function (x) {

	return this.each(function () {
		var anim = $(this).attr('data-animated-auto');
		$(this).addClass('animated '+ anim);
	
	})
	

	}
	
})})(jQuery);

$(document).ready(function(e) {
	$('[data-fade]').FVN_FW_DataFade();
	$('[data-replay]').FVN_FW_DataReplay();
	$('[data-animated]').FVN_FW_DataAnimated();
	$('[data-animated-auto]').FVN_FW_DataAnimatedAuto();
});


/*//////////////////////////////////////////////////////////////////////*/
/*//TOPCONTROL////////////////////////////////////////////////////////////*/
/*//////////////////////////////////////////////////////////////////////*/

var scrolltotop={
	//startline: Integer. Number of pixels from top of doc scrollbar is scrolled before showing control
	//scrollto: Keyword (Integer, or "Scroll_to_Element_ID"). How far to scroll document up when control is clicked on (0=top).
	setting: {startline:100, scrollto: 0, scrollduration:1200, fadeduration:[500, 100]},
	controlHTML: '<div class="topcontrol"><i class="fa fa-angle-double-up"></i></div>', //HTML for control, which is auto wrapped in DIV w/ ID="topcontrol"
	controlattrs: {offsetx:0, offsety:0}, //offset of control relative to right/ bottom of window corner
	anchorkeyword: '#top', //Enter href value of HTML anchors on the page that should also act as "Scroll Up" links

	state: {isvisible:false, shouldvisible:false},

	scrollup:function(){
		if (!this.cssfixedsupport) //if control is positioned using JavaScript
			this.$control.css({opacity:0}) //hide control immediately after clicking it
		var dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto)
		if (typeof dest=="string" && jQuery('#'+dest).length==1) //check element set by string exists
			dest=jQuery('#'+dest).offset().top
		else
			dest=0
		this.$body.animate({scrollTop: dest}, this.setting.scrollduration);
	},

	keepfixed:function(){
		var $window=jQuery(window)
		var controlx=$window.scrollLeft() + $window.width() - this.$control.width() - this.controlattrs.offsetx
		var controly=$window.scrollTop() + $window.height() - this.$control.height() - this.controlattrs.offsety
		this.$control.css({left:controlx+'px', top:controly+'px'})
	},

	togglecontrol:function(){
		var scrolltop=jQuery(window).scrollTop()
		if (!this.cssfixedsupport)
			this.keepfixed()
		this.state.shouldvisible=(scrolltop>=this.setting.startline)? true : false
		if (this.state.shouldvisible && !this.state.isvisible){
			this.$control.stop().animate({opacity:1}, this.setting.fadeduration[0])
			this.state.isvisible=true
		}
		else if (this.state.shouldvisible==false && this.state.isvisible){
			this.$control.stop().animate({opacity:0}, this.setting.fadeduration[1])
			this.state.isvisible=false
		}
	},
	
	init:function(){
		jQuery(document).ready(function($){
			var mainobj=scrolltotop
			var iebrws=document.all
			mainobj.cssfixedsupport=!iebrws || iebrws && document.compatMode=="CSS1Compat" && window.XMLHttpRequest //not IE or IE7+ browsers in standards mode
			mainobj.$body=(window.opera)? (document.compatMode=="CSS1Compat"? $('html') : $('body')) : $('html,body')
			mainobj.$control=$('<div id="topcontrol">'+mainobj.controlHTML+'</div>')
				.css({position:mainobj.cssfixedsupport? 'fixed' : 'absolute', bottom:mainobj.controlattrs.offsety, right:mainobj.controlattrs.offsetx, opacity:0, cursor:'pointer'})
				.attr({title:'To the top! To the victory!'})
				.click(function(){mainobj.scrollup(); return false})
				.appendTo('body')
			if (document.all && !window.XMLHttpRequest && mainobj.$control.text()!='') //loose check for IE6 and below, plus whether control contains any text
				mainobj.$control.css({width:mainobj.$control.width()}) //IE6- seems to require an explicit width on a DIV containing text
			mainobj.togglecontrol()
			$('a[href="' + mainobj.anchorkeyword +'"]').click(function(){
				mainobj.scrollup()
				return false
			})
			$(window).bind('scroll resize', function(e){
				mainobj.togglecontrol()
			})
		})
	}
}

scrolltotop.init();


// Sticky Plugin v1.0.0 for jQuery
// =============
// Author: Anthony Garand
// Improvements by German M. Bravo (Kronuz) and Ruud Kamphuis (ruudk)
// Improvements by Leonardo C. Daronco (daronco)
// Created: 2/14/2011
// Date: 2/12/2012
// Website: http://labs.anthonygarand.com/sticky
// Description: Makes an element on the page stick on the screen as you scroll
//       It will only set the 'top' and 'position' of your element, you
//       might need to adjust the width in some cases.

(function($) {
  var defaults = {
      topSpacing: 0,
      bottomSpacing: 0,
      className: 'is-sticky',
      wrapperClassName: 'sticky-wrapper',
      center: false,
      getWidthFrom: ''
    },
    $window = $(window),
    $document = $(document),
    sticked = [],
    windowHeight = $window.height(),
    scroller = function() {
      var scrollTop = $window.scrollTop(),
        documentHeight = $document.height(),
        dwh = documentHeight - windowHeight,
        extra = (scrollTop > dwh) ? dwh - scrollTop : 0;

      for (var i = 0; i < sticked.length; i++) {
        var s = sticked[i],
          elementTop = s.stickyWrapper.offset().top,
          etse = elementTop - s.topSpacing - extra;

        if (scrollTop <= etse) {
          if (s.currentTop !== null) {
            s.stickyElement
              .css('position', '')
              .css('top', '');
            s.stickyElement.parent().removeClass(s.className);
            s.currentTop = null;
          }
        }
        else {
          var newTop = documentHeight - s.stickyElement.outerHeight()
            - s.topSpacing - s.bottomSpacing - scrollTop - extra;
          if (newTop < 0) {
            newTop = newTop + s.topSpacing;
          } else {
            newTop = s.topSpacing;
          }
          if (s.currentTop != newTop) {
            s.stickyElement
              .css('position', 'fixed')
              .css('top', newTop);

            if (typeof s.getWidthFrom !== 'undefined') {
              s.stickyElement.css('width', $(s.getWidthFrom).width());
            }

            s.stickyElement.parent().addClass(s.className);
            s.currentTop = newTop;
          }
        }
      }
    },
    resizer = function() {
      windowHeight = $window.height();
    },
    methods = {
      init: function(options) {
        var o = $.extend(defaults, options);
        return this.each(function() {
          var stickyElement = $(this);

          var stickyId = stickyElement.attr('id');
          var wrapper = $('<div></div>')
            .attr('id', stickyId + '-sticky-wrapper')
            .addClass(o.wrapperClassName);
          stickyElement.wrapAll(wrapper);

          if (o.center) {
            stickyElement.parent().css({width:stickyElement.outerWidth(),marginLeft:"auto",marginRight:"auto"});
          }

          if (stickyElement.css("float") == "right") {
            stickyElement.css({"float":"none"}).parent().css({"float":"right"});
          }

          var stickyWrapper = stickyElement.parent();
          //stickyWrapper.css('height', stickyElement.outerHeight());
          sticked.push({
            topSpacing: o.topSpacing,
            bottomSpacing: o.bottomSpacing,
            stickyElement: stickyElement,
            currentTop: null,
            stickyWrapper: stickyWrapper,
            className: o.className,
            getWidthFrom: o.getWidthFrom
          });
        });
      },
      update: scroller,
      unstick: function(options) {
        return this.each(function() {
          var unstickyElement = $(this);

          removeIdx = -1;
          for (var i = 0; i < sticked.length; i++) 
          {
            if (sticked[i].stickyElement.get(0) == unstickyElement.get(0))
            {
                removeIdx = i;
            }
          }
          if(removeIdx != -1)
          {
            sticked.splice(removeIdx,1);
            unstickyElement.unwrap();
            unstickyElement.removeAttr('style');
          }
        });
      }
    };

  // should be more efficient than using $window.scroll(scroller) and $window.resize(resizer):
  if (window.addEventListener) {
    window.addEventListener('scroll', scroller, false);
    window.addEventListener('resize', resizer, false);
  } else if (window.attachEvent) {
    window.attachEvent('onscroll', scroller);
    window.attachEvent('onresize', resizer);
  }

  $.fn.sticky = function(method) {
    if (methods[method]) {
      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method ) {
      return methods.init.apply( this, arguments );
    } else {
      $.error('Method ' + method + ' does not exist on jQuery.sticky');
    }
  };

  $.fn.unstick = function(method) {
    if (methods[method]) {
      return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method ) {
      return methods.unstick.apply( this, arguments );
    } else {
      $.error('Method ' + method + ' does not exist on jQuery.sticky');
    }

  };
  $(function() {
    setTimeout(scroller, 0);
  });
})(jQuery);
